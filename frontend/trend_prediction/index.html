<!DOCTYPE html>
<meta charset="utf-8">
<head>
    <title>Trend Line Chart</title>
    <style>
        rect {
            pointer-events: all;
            fill-opacity: 0;
            stroke-opacity: 0;
            z-index: 1;
        }
    
        .tooltip {
            position: absolute;
            padding: 10px;
            background-color: steelblue;
            color: white;
            border: 1px solid white;
            border-radius: 10px;
            display: none;
            opacity: .75;
        }
    </style>
    <script src="https://d3js.org/d3.v6.js"></script>
</head>
<body>
    <label for="selectButton">Select a town:</label>
    <select id="selectButton"></select>
    <div id="trend_chart"></div>

    <script>
        function processData(predictedData) {
            const modifiedData = [];

            Object.keys(predictedData).forEach(town => {
                const townData = predictedData[town];

                Object.keys(townData).forEach(year => {
                    modifiedData.push({
                        town: town,
                        year: parseInt(year),
                        medianPrice: townData[year]
                    });
                });
            });
            return modifiedData;
        }

        function initializeVisualization(data) {
            d3.select("#trend-chart")
                .selectAll("circle")
                .data(data)
                .enter()
                .append("circle")
                .attr("cx", d => xScale(new Date(d.year)))
                .attr("cy", d => yScale(d.medianPrice))
                .attr("r", 4)
                .attr("fill", "red");
        }
    </script>

    <script src="index.js"></script>
</body>
</html>
